{% extends "app/menu.html" %}
{% block content %}
<h1 class="text-center"></h1>
  <div class="col-lg-12">
      <h1 class="text-center" style="margin-top:5%"> Listado de Restaurantes </h1>
      <div class="table-responsive" style="margin-top:6%">
          <table class="table table-bordered table-hover table-striped tablesorter">
              <thead>
              <tr>
                <th class="header"> Nombre <i class="icon-sort"></i></th>
                <th class="header"> Ciudad <i class="icon-sort"></i></th>
                <th class="header"> <i class="icon-sort"></i></th>
                <th class="header"> <i class="icon-sort"></i></th>
                <th class="header"> <i class="icon-sort"></i></th>
              </tr>
          </thead>
          <tbody>

          {% for key in data %}
              <tr>
                  <td>{{ key.name }}</td>
                  <td>{{ key.city }}</td>
                  <td align="center">
                    <form id="search_form" method="post" action="/restaurantes/searchRestaurant/">
                      {% csrf_token %}
                      <input class="form-control mr-sm-2" maxlength="8" type="text" hidden="true" name="searched_id" value="{{key.id_restaurant}}">
                      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#getModal" title="Consultar">
                        <span class="fa fa-hand-o-right" aria-hidden="true"></span>
                      </button>
                    </form>
                  </td>
                  <td align="center">
                    <input id="delete_id" class="form-control mr-sm-2" maxlength="8" type="text" hidden="true" name="searched_id" value="{{key.id_restaurant}}">
                    <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#deleteModal" data-placement="right" title="Eliminar" >
                      <span class="fa fa-trash-o" aria-hidden="true"></span>
                    </button>
                  </td>
                  <td align="center">
                    <form id="search_form" method="post" action="/restaurantes/modifyRestaurant/">
                      {% csrf_token %}
                      <input class="form-control mr-sm-2" maxlength="8" type="text" hidden="true" name="searched_id" value="{{key.id_restaurant}}">
                      <button class="btn btn-primary" type="submit" data-toggle="tooltip" data-placement="right" title="Modificar" >
                        <span class="fa fa-pencil" aria-hidden="true"></span>
                      </button>
                    </form>
                  </td>
              </tr>

              <!-- Modal Consultar -->
              <div class="modal fade" id="getModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">{{ key.name }}</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body">
                      <p>{{ key.address.street }}</p>
                      <p>{{ key.address.city }}</p>
                      <p>{{ key.address.zipcode }}</p>
                      <img style="width:100%; height:30%" class="img-responsive" src="https://maps.googleapis.com/maps/api/streetview?size=600x300&location={{ key.address.coord.lat }},{{ key.address.coord.lon }}" alt="" >
                      <a href="#">
                          <div class="mask waves-effect waves-light"></div>
                      </a>
                    </div>
                    <div class="modal-footer">
                    <!--  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                      <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button> -->
                    </div>
                  </div>
                </div>
              </div>

              <!-- Modal Eliminar -->
              <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <form id="delete_form" method="post" action="/restaurantes/deleteRestaurant/">
                      {% csrf_token %}
                      <input id="delete_id" class="form-control mr-sm-2" maxlength="8" type="text" hidden="true" name="searched_id" value="{{key.id_restaurant}}">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">{{ key.name }}</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <p>Â¿Desea eliminar el resutaurante?</p>
                      </div>
                      <div class="modal-footer">
                        <button type="submit" class="btn btn-secondary">Eliminar</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Cancelar</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

          {% endfor %}

          </tbody>
          </table>
      </div>
    </div>

{% endblock %}
